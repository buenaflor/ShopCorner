
  <div *ngIf="errorOccurred===true" class="alert alert-danger" role="alert">
    {{ errorMessage }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="resetState()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div *ngIf="errorOccurred===false" class="alert alert-success" role="alert">
    Ihr neues Produkt wurde erfolgreich in ihrem Sortiment hinzugefügt!
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="resetForm()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="operator-add-product-header mt-3" style="display:flex;justify-content: space-between">
    <div *ngIf="addProductEnabled===false; else elseProductAdd">
      <h3>Produkt - Detail</h3>
    </div>
    <ng-template #elseProductAdd>
      <h3>Produkt hinzufügen</h3>
    </ng-template>
    <div *ngIf="addProductEnabled===true">
      <button class="btn btn-primary" type="submit" [disabled]="!productForm.valid"  (click)="myForm.ngSubmit.emit()">
        Speichern
      </button>
    </div>
    <div *ngIf="addProductEnabled === false && inEditMode === true">
      <button class="btn btn-primary" type="submit" (click)="enableEditing()">
        Bearbeiten
      </button>
    </div>

  </div>
  <hr/>
  <form class="row g-3" [formGroup]="productForm" #myForm="ngForm" (ngSubmit)="addProduct()">
    <div class="col-md-6 mt-3">

      <div class="form-group required">
        <label for="inputTitle" class="form-label"><b>Name *</b></label>
        <input type="text" class="form-control" id="inputTitle" name="input1"
               placeholder="Geben Sie einen Namen für ihr Produkt ein" required formControlName="name">
        <div *ngIf="productFormControl.name.touched && productFormControl.name.invalid">
          <div class="text-danger" *ngIf="productFormControl.name.errors.required">Geben Sie bitte einen Namen ein</div>
          <div class="text-danger" *ngIf="productFormControl.name.errors.minlength">Der Name muss mindestens 3 Zeichen
            besitzen
          </div>
          <div class="text-danger" *ngIf="productFormControl.name.errors.maxlength">Der Name ist zu lang. Bitte wählen
            Sie einen kürzeren Namen.
          </div>
          <div class="text-danger" *ngIf="productFormControl.name.hasError('whitespace')">Der Name darf nur aus Zeichen
            bestehen
          </div>
        </div>
        <div *ngIf="productFormControl.name.touched && productFormControl.name.valid">
          <div class="text-success">Gültiger Name</div>
        </div>


      </div>
    </div>

    <div class="col-md-6 mt-3">

      <div class="form-group required ">
        <label for="inputPrice" class="form-label"><b>Preis in € *</b></label>
        <input type="number" class="form-control" min="0.00" max="10000.00" step="0.01" id="inputPrice"
               name="input2"
               placeholder="0.00"
               formControlName="price"
               required="required"/>
        <div *ngIf="productFormControl.price.touched && productFormControl.price.invalid">
          <div class="text-danger" *ngIf="productFormControl.price.errors.required">Geben Sie bitte einen Preis in EUR
            ein, zB. 1.20
          </div>
        </div>
        <div *ngIf="productFormControl.price.touched && productFormControl.price.valid">
          <div class="text-success">Gültiger Preis</div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="form-group required">
        <label for="inputTaxRates" class="form-label"><b>Steuersatz *</b></label>
        <select class="custom-select" name="tax-rates" id="inputTaxRates" formControlName="taxRate"
                (change)="changeTaxRate($event)">
          <option selected disabled value="null">Steuersatz auswählen</option>
          <option *ngFor="let taxRate of this.taxRates" [value]="taxRate.id">{{taxRate.percentage + '%'}}</option>
        </select>
        <div *ngIf="productFormControl.taxRate.touched && productFormControl.taxRate.invalid">
          <div class="text-danger" *ngIf="productFormControl.taxRate.errors.required">Bitte einen Steuersatz für ihr
            Produkt angeben
          </div>
        </div>
        <div *ngIf="productFormControl.taxRate.touched && productFormControl.taxRate.valid">
          <div class="text-success">Steuersatz gültig</div>
        </div>
      </div>

    </div>
    <div class="col-md-6 mt-3">
      <div class="form-group">
        <label for="inputCategories" class="form-label"><b>Kategorie</b></label>
        <select class="custom-select" id="inputCategories" formControlName="category"
                (change)="changeCategory($event)">
          <option selected disabled value="null">Kategorie auswählen</option>
          <option *ngFor="let category of this.categories" [value]="category.id">{{category.name}}</option>
          <option value="null">--keine Kategorie--</option>
        </select>
      </div>

    </div>
    <div class="col-md-12 mt-3">
      <div class="form-group">
        <label for="inputDescription" class="form-label"><b>Beschreibung</b></label>
        <textarea class="form-control" id="inputDescription" rows="2"
                  name="input4" placeholder="Beschreiben Sie ihr Produkt" formControlName="description"></textarea>
        <div *ngIf="productFormControl.description.invalid">
          <div class="text-danger" *ngIf="productFormControl.description.errors.maxlength">Die Beschreibung ist zu lang. Bitte wählen
            Sie eine kürzere Beschreibung Namen.
          </div>
        </div>


      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="custom-file mt-3" *ngIf="addProductEnabled">

        <input #fileInput type="file" class="custom-file-input" id="customFile" (change)="onSelectFile($event)"
               accept="image/png, image/jpeg"
        >

        <label class="custom-file-label" for="customFile">
          <div *ngIf="fileToUpload; else elseBlock">
            {{fileToUpload?.name}}
          </div>
          <ng-template #elseBlock>Bild auswählen...</ng-template>
        </label>
        <div *ngIf="fileSource" class="mt-2">
          <button type="button" class="btn btn-light" (click)="clearImage()">Entfernen</button>
        </div>

      </div>
    </div>


    <div class="col-md-6 mt-4" style="text-align:center">

      <div *ngIf="fileSource">
        <img src="{{fileSource}}" alt="" height="250" width="250">
      </div>

    </div>


  </form>

